# EstimatorAI - Complete Deployment Guide

**Created:** 2026-02-05 01:10 PST  
**Status:** Ready to deploy (pending OpenAI API key)

---

## Prerequisites

### Required Accounts
- ‚úÖ GitHub account (ProfitSwitcher)
- ‚úÖ Vercel account with API key
- ‚úÖ Railway account with API key
- ‚ùå OpenAI account with API key (GET THIS FIRST!)
- ‚ö†Ô∏è Stripe account (can use test mode initially)

### Get OpenAI API Key (5 minutes)
1. Go to https://platform.openai.com/api-keys
2. Sign in or create account
3. Click "Create new secret key"
4. Copy key (starts with `sk-...`)
5. Add $5-10 credit at https://platform.openai.com/account/billing
   - Enough for 50-100 estimates
   - $0.10-0.50 per estimate depending on photo count

---

## Option 1: Deploy via Web Dashboards (Easiest)

### Backend ‚Üí Railway

1. **Create Project**
   - Go to https://railway.app/new
   - Click "Deploy from GitHub repo"
   - Select `ProfitSwitcher/estimatorai`
   - Name: `estimatorai-backend`

2. **Add PostgreSQL Database**
   - In project dashboard, click "+ New"
   - Select "Database" ‚Üí "PostgreSQL"
   - Railway will auto-generate DATABASE_URL

3. **Configure Backend Service**
   - Click on the GitHub service
   - Settings ‚Üí Root Directory: `backend`
   - Settings ‚Üí Build Command: `npm install`
   - Settings ‚Üí Start Command: `npm start`

4. **Set Environment Variables**
   ```env
   # Database (auto-generated by Railway)
   DATABASE_URL=<from Railway Postgres>
   
   # OpenAI (GET THIS!)
   OPENAI_API_KEY=sk-...your-key...
   
   # Auth
   JWT_SECRET=<generate random 32+ char string>
   JWT_EXPIRES_IN=7d
   
   # Server
   PORT=3001
   NODE_ENV=production
   
   # Frontend (will set after Vercel deploy)
   FRONTEND_URL=https://estimatorai.vercel.app
   
   # Stripe (optional for now)
   STRIPE_SECRET_KEY=sk_test_...
   ```

5. **Generate Domain**
   - Settings ‚Üí Networking ‚Üí Generate Domain
   - Copy URL (e.g., `estimatorai-backend.railway.app`)
   - Save for frontend config

6. **Deploy**
   - Click "Deploy" or push to GitHub to auto-deploy
   - Check logs for successful startup

### Frontend ‚Üí Vercel

1. **Import Project**
   - Go to https://vercel.com/new
   - Click "Import Git Repository"
   - Select `ProfitSwitcher/estimatorai`
   - Name: `estimatorai` or `estimatorai-frontend`

2. **Configure Build**
   - Framework Preset: **Next.js**
   - Root Directory: `frontend`
   - Build Command: `npm run build` (default)
   - Output Directory: `.next` (default)

3. **Set Environment Variables**
   ```env
   NEXT_PUBLIC_API_URL=https://estimatorai-backend.railway.app
   ```

4. **Deploy**
   - Click "Deploy"
   - Wait 2-3 minutes for build
   - Copy deployment URL

5. **Update Backend FRONTEND_URL**
   - Go back to Railway backend
   - Update `FRONTEND_URL` env var to Vercel URL
   - Redeploy backend

---

## Option 2: Deploy via CLI (Faster for pros)

### Prerequisites
```bash
# Install CLIs
npm install -g vercel
npm install -g @railway/cli

# Login
vercel login
railway login
```

### Backend ‚Üí Railway

```bash
cd /home/alvis/clawd-chat/estimatorai/backend

# Create project
railway init

# Add PostgreSQL
railway add

# Set environment variables
railway variables set OPENAI_API_KEY=sk-...
railway variables set JWT_SECRET=$(openssl rand -hex 32)
railway variables set NODE_ENV=production
railway variables set PORT=3001

# Deploy
railway up

# Get URL
railway domain
```

### Frontend ‚Üí Vercel

```bash
cd /home/alvis/clawd-chat/estimatorai/frontend

# Deploy
vercel --prod

# Will prompt for:
# - Project name: estimatorai
# - Root directory: ./
# - Build command: npm run build
# - Output directory: .next

# Set environment variable
vercel env add NEXT_PUBLIC_API_URL
# Paste Railway backend URL

# Redeploy with env var
vercel --prod
```

---

## Option 3: Deploy via API (Automated)

See `/home/alvis/clawd-chat/estimatorai/scripts/deploy.sh` (create this if needed)

---

## Post-Deployment Checklist

### 1. Test Backend API
```bash
# Health check
curl https://estimatorai-backend.railway.app/health

# Expected: {"status":"ok","timestamp":"..."}
```

### 2. Test Frontend
1. Open Vercel URL
2. Click "Start Free Trial"
3. Enter test project: "Kitchen remodel, 300 sq ft"
4. Should see estimate generate

### 3. Database Migration
```bash
# SSH into Railway or run migration script
railway run npm run migrate

# Or if using Supabase, run SQL from /backend/database/schema.sql
```

### 4. Configure Custom Domain (Optional)
- **Vercel:** estimatorai.com ‚Üí Settings ‚Üí Domains
- **Railway:** api.estimatorai.com ‚Üí Settings ‚Üí Networking

---

## Environment Variables Reference

### Backend (Railway)

| Variable | Required | Example | Where to Get |
|----------|----------|---------|--------------|
| `DATABASE_URL` | ‚úÖ | `postgresql://...` | Railway Postgres auto-generated |
| `OPENAI_API_KEY` | ‚úÖ | `sk-...` | https://platform.openai.com/api-keys |
| `JWT_SECRET` | ‚úÖ | Random 32+ chars | `openssl rand -hex 32` |
| `JWT_EXPIRES_IN` | ‚úÖ | `7d` | Hardcode |
| `FRONTEND_URL` | ‚úÖ | `https://estimatorai.vercel.app` | Vercel deployment URL |
| `PORT` | ‚úÖ | `3001` | Hardcode |
| `NODE_ENV` | ‚úÖ | `production` | Hardcode |
| `STRIPE_SECRET_KEY` | ‚ö†Ô∏è | `sk_test_...` | https://dashboard.stripe.com/apikeys |
| `STRIPE_WEBHOOK_SECRET` | ‚ö†Ô∏è | `whsec_...` | Stripe webhook settings |
| `SENDGRID_API_KEY` | ‚ùå | `SG....` | Optional for emails |

### Frontend (Vercel)

| Variable | Required | Example |
|----------|----------|---------|
| `NEXT_PUBLIC_API_URL` | ‚úÖ | `https://estimatorai-backend.railway.app` |
| `NEXT_PUBLIC_STRIPE_PUBLIC_KEY` | ‚ö†Ô∏è | `pk_test_...` |

---

## Troubleshooting

### Backend won't start
```bash
# Check logs
railway logs

# Common issues:
# 1. Missing OPENAI_API_KEY
# 2. DATABASE_URL not set
# 3. Port conflict (should use Railway's PORT env var)
```

### Frontend can't connect to backend
1. Check CORS settings in backend (`FRONTEND_URL` env var)
2. Verify `NEXT_PUBLIC_API_URL` in Vercel
3. Check Railway backend is running (not sleeping)

### Database errors
```bash
# Run migrations
railway run npm run migrate

# Or manually run schema.sql in Postgres
railway run psql $DATABASE_URL -f database/schema.sql
```

### OpenAI API errors
1. Check API key is valid
2. Verify billing is set up at https://platform.openai.com/account/billing
3. Check usage limits

---

## Cost Breakdown

### Monthly Operating Costs

| Service | Free Tier | Paid |
|---------|-----------|------|
| **Railway** | $5/mo credit | ~$5-10/mo (backend + DB) |
| **Vercel** | Free | Free for hobby projects |
| **OpenAI** | - | $0.10-0.50 per estimate |
| **Stripe** | Free | 2.9% + $0.30 per transaction |
| **Supabase** | 500MB free | Optional |

**Total:** ~$10-20/mo + usage-based OpenAI costs

### Per-Estimate Cost
- OpenAI API: $0.10-0.50 (depends on photo count)
- With 100 estimates/month: $10-50 in OpenAI costs
- With $49/mo pricing: 3-10 estimates = break even

**Strategy:** Free tier = 5 estimates/mo, Pro = unlimited at $49/mo

---

## Monitoring & Maintenance

### Set Up Monitoring
1. **Railway:** Built-in metrics + logs
2. **Vercel:** Built-in analytics
3. **Sentry** (optional): Error tracking
4. **Posthog** (optional): User analytics

### Backup Strategy
1. **Database:** Railway auto-backups (daily)
2. **Code:** GitHub (already backed up)
3. **User uploads:** Store in S3 (future enhancement)

---

## Scaling Plan

### Phase 1: MVP (0-100 users)
- Current setup is fine
- Railway Hobby plan
- Vercel Free tier

### Phase 2: Growth (100-1000 users)
- Upgrade Railway to Pro ($20/mo)
- Add Redis for caching
- Implement image CDN (Cloudinary)
- Move from Railway DB to managed Postgres (Supabase/Neon)

### Phase 3: Scale (1000+ users)
- Kubernetes or Railway Teams
- Multi-region deployment
- Load balancer
- Microservices architecture

---

## Quick Start Commands

### Deploy Everything (with CLIs installed)
```bash
# Backend
cd /home/alvis/clawd-chat/estimatorai/backend
railway init
railway add  # PostgreSQL
railway variables set OPENAI_API_KEY=sk-...
railway up

# Frontend
cd /home/alvis/clawd-chat/estimatorai/frontend
vercel --prod
vercel env add NEXT_PUBLIC_API_URL
```

---

## Next Steps After Deployment

1. ‚úÖ Test thoroughly (try 5-10 estimates)
2. ‚úÖ Get 3 beta testers
3. ‚úÖ Set up Stripe test mode
4. ‚úÖ Create demo video
5. ‚úÖ Write launch blog post
6. ‚úÖ Prepare Product Hunt submission
7. üöÄ LAUNCH!

---

## Support

**Questions?**
- Check logs: `railway logs` or Vercel deployment logs
- Backend code: `/backend/server.js`
- Frontend code: `/frontend/app/`

**Issues?**
- GitHub: https://github.com/ProfitSwitcher/estimatorai/issues
- Or message directly on WhatsApp

---

**You're 10 minutes away from a live SaaS product! üöÄ**

Built with ‚ù§Ô∏è overnight  
Your AI Assistant
